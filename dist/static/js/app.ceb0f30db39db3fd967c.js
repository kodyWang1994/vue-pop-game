webpackJsonp([1],{"4DiR":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=s("VU/8")({name:"App"},i,!1,function(t){s("4DiR")},null,null).exports,n=s("/ocq"),a=s("BO1k"),c=s.n(a),l=s("rdLu"),h=s.n(l),u={name:"HelloWorld",data:function(){return{x:20,y:120,blockColors:{},colors:["#b23aee","#ff7f24","#0000ff","#008000"],currentSource:0,targetSource:1500,step:1,showTip:!1,clearCount:0,source:0,showStepOverTip:!1,lessCount:0,stepOverSource:0,over:!1}},mounted:function(){console.warn("Design by Kody Wang, Thank you, play my game!");var t=window.innerWidth,e=window.innerHeight;this.x=(t-320)/2,this.y=(e-320)/2,this.canvas=document.getElementById("myCanvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e,this.ctx.fillStyle="#FFF8DC",this.ctx.fillRect(0,0,t,e),this.init()},methods:{click:function(t){var e=this,s=parseInt((t.clientX-this.x)/32),r=parseInt(parseInt((t.clientY-this.y)/32));if(!(s<0||s>9||r<0||r>9)){var i=parseInt(r+""+s);h.a.has(this.blockColors,i)&&(this.getNeedCleanBlock(i,[i]),setTimeout(function(){e.needCleanBlock.length>=2&&e.clearing(e.needCleanBlock)},300))}},clearing:function(t){var e=this;this.xx=1,this.yy=3;var s=!0,r=!1,i=void 0;try{for(var o,n=c()(t);!(s=(o=n.next()).done);s=!0){var a=o.value;this.ctx.clearRect(this.x+32*parseInt(a%10),this.y+32*parseInt(a/10),30,30),delete this.blockColors[a]}}catch(t){r=!0,i=t}finally{try{!s&&n.return&&n.return()}finally{if(r)throw i}}this.addSource(t),setTimeout(function(){e.blockDown(t),window.requestAnimationFrame(e.draw)},300)},draw:function(){for(var t in this.ctx.clearRect(0,0,window.innerWidth,window.innerHeight),this.ctx.fillStyle="#FFF8DC",this.ctx.fillRect(0,0,window.innerWidth,window.innerHeight),this.ctx.strokeStyle="#ccc",this.ctx.rect(this.x,this.y,320,320),this.ctx.stroke(),h.a.range(10))for(var e in h.a.range(10)){var s=parseInt(t+e);h.a.has(this.blockColors,s)&&(this.ctx.fillStyle=this.blockColors[s],this.ctx.fillRect(this.x+32*e,this.y+32*t,30,30))}},addSource:function(t){var e=t.length;this.source=e*e*5,this.clearCount=e,this.showTip=!0,this.currentSource+=this.source},blockDown:function(t){var e=h.a.groupBy(t,function(t){return t%10});for(var s in e){for(var r=e[s],i=[],o=h.a.max(r);o>=0;o-=10)i.push(o);var n=h.a.difference(i,r),a=!0,l=!1,u=void 0;try{for(var v,f=c()(i);!(a=(v=f.next()).done);a=!0){var p=v.value;if(h.a.isEmpty(n))this.ctx.clearRect(this.x+32*parseInt(p%10),this.y+32*parseInt(p/10),30,30),delete this.blockColors[p];else{var d=n.shift();if(h.a.has(this.blockColors,d)){var C=this.blockColors[d];this.blockColors[p]=C,this.ctx.fillStyle=C,this.ctx.fillRect(this.x+32*parseInt(p%10),this.y+32*parseInt(p/10),30,30)}else this.ctx.clearRect(this.x+32*parseInt(p%10),this.y+32*parseInt(p/10),30,30),delete this.blockColors[p]}}}catch(t){l=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(l)throw u}}}this.leftMove()},leftMove:function(){var t=h.a.groupBy(this.blockColors,function(t,e){return e%10});if(h.a.size(t)<10){var e=[],s=!0,r=!1,i=void 0;try{for(var o,n=c()(h.a.range(10));!(s=(o=n.next()).done);s=!0){var a=o.value;h.a.has(t,a)||e.push(a)}}catch(t){r=!0,i=t}finally{try{!s&&n.return&&n.return()}finally{if(r)throw i}}e=h.a.sortBy(e,function(t){return-t});var l=!0,u=!1,v=void 0;try{for(var f,p=c()(e);!(l=(f=p.next()).done);l=!0)for(var d=f.value+1;d<=9;d++){var C=!0,y=!1,x=void 0;try{for(var k,w=c()(h.a.range(d,100,10));!(C=(k=w.next()).done);C=!0){var m=k.value;if(h.a.has(this.blockColors,m)){var b=this.blockColors[m],g=m-1;this.blockColors[g]=b,this.ctx.fillStyle=b,this.ctx.fillRect(this.x+32*parseInt(g%10),this.y+32*parseInt(g/10),30,30),this.ctx.clearRect(this.x+32*parseInt(m%10),this.y+32*parseInt(m/10),30,30),delete this.blockColors[m]}}}catch(t){y=!0,x=t}finally{try{!C&&w.return&&w.return()}finally{if(y)throw x}}}}catch(t){u=!0,v=t}finally{try{!l&&p.return&&p.return()}finally{if(u)throw v}}}this.checkIsCanClear()},checkIsCanClear:function(){for(var t in this.blockColors)if(this.hasNearbyBlock(t))return;this.gameOver()},hasNearbyBlock:function(t){var e=this.blockColors[t],s=!1;return parseInt((t+1)/10)===parseInt(t/10)&&e===this.blockColors[t+1]&&(s=!0),parseInt((t-1)/10)===parseInt(t/10)&&e===this.blockColors[t-1]&&(s=!0),e===this.blockColors[t+10]&&(s=!0),e===this.blockColors[t-10]&&(s=!0),s},getNeedCleanBlock:function(t,e){var s=this,r=this.blockColors[t],i=!1;if(parseInt((t+1)/10)===parseInt(t/10)&&-1===h.a.indexOf(e,t+1)&&r===this.blockColors[t+1]&&(i=!0,e.push(t+1),setTimeout(function(){s.getNeedCleanBlock(t+1,e)},0)),parseInt((t-1)/10)===parseInt(t/10)&&-1===h.a.indexOf(e,t-1)&&r===this.blockColors[t-1]&&(i=!0,e.push(t-1),setTimeout(function(){s.getNeedCleanBlock(t-1,e)},0)),-1===h.a.indexOf(e,t+10)&&r===this.blockColors[t+10]&&(i=!0,e.push(t+10),setTimeout(function(){s.getNeedCleanBlock(t+10,e)},0)),-1===h.a.indexOf(e,t-10)&&r===this.blockColors[t-10]&&(i=!0,e.push(t-10),setTimeout(function(){s.getNeedCleanBlock(t-10,e)},0)),!i)return this.needCleanBlock=e,e},startGame:function(){for(var t in this.ctx.strokeStyle="#ccc",this.ctx.rect(this.x,this.y,320,320),h.a.range(10))for(var e in h.a.range(10)){var s=parseInt(t+e);this.ctx.fillStyle=h.a.sample(this.colors),this.blockColors[s]=this.ctx.fillStyle,this.ctx.fillRect(this.x+32*e,this.y+32*t,30,30)}this.ctx.stroke(),this.ctx.beginPath()},restartGame:function(){this.currentSource=0,this.step=1,this.targetSource=1500,this.showStepOverTip=!1,this.over=!1,this.startGame()},gameOver:function(){var t=this;this.lessCount=h.a.size(this.blockColors),this.stepOverSource=this.lessCount>10?0:100*(10-this.lessCount),this.showStepOverTip=!0,this.currentSource+=this.stepOverSource,this.currentSource<this.targetSource?this.over=!0:(this.step+=1,this.targetSource=1500+3e3*(this.step-1),setTimeout(function(){t.showStepOverTip=!1,t.startGame()},2e3))},init:function(){this.startGame()}}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("canvas",{attrs:{id:"myCanvas"},on:{click:t.click}}),t._v(" "),s("div",{staticClass:"game-panel"},[s("div",[t._v("第"+t._s(t.step)+"关")]),t._v(" "),s("div",[t._v("目标分数： "+t._s(t.targetSource))]),t._v(" "),s("div",[t._v("当前分数： "+t._s(t.currentSource))]),t._v(" "),t.showTip?s("div",{staticClass:"tip"},[t._v("消除"+t._s(t.clearCount)+"个，获得"+t._s(t.source)+"分")]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showStepOverTip,expression:"showStepOverTip"}],staticClass:"tip"},[t._v("剩余"+t._s(t.lessCount)+"个，奖励"+t._s(t.stepOverSource)+"分")])]),t._v(" "),t.over?s("div",{staticClass:"game-over"},[s("div",{staticClass:"over-text"},[t._v("游戏结束")]),t._v(" "),s("div",{staticClass:"restart",on:{click:t.restartGame}},[t._v("重新开始")])]):t._e()])},staticRenderFns:[]};var f=s("VU/8")(u,v,!1,function(t){s("VT7O")},"data-v-44d6cabc",null).exports;r.a.use(n.a);var p=new n.a({routes:[{path:"/",name:"HelloWorld",component:f}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:p,components:{App:o},template:"<App/>"})},VT7O:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ceb0f30db39db3fd967c.js.map